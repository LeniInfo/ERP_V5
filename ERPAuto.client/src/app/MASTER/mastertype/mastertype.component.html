<div class="container">
  <div class="main-card">
    <!-- ðŸ”· Navbar -->
    <div class="inner-navbar d-flex justify-content-between align-items-center">
      <h5>{{ typeLabel }}</h5>
    </div>



      <div *ngIf="isEditMode"
           class="mastercode-box d-flex align-items-center px-3 ms-3">
        <strong class="me-1">Master Code:</strong> {{ masterType.masterCode }}
      </div>

      <div class="form-section">

        <!-- Master Type Form -->
        <form (ngSubmit)="onSubmit()" #masterTypeForm="ngForm" class="row g-3">

          
          <!-- Name -->
          <div class="col-md-4">
            <label class="form-label">Name</label>
            <input type="text"
                   class="form-control"
                   name="name"
                   [(ngModel)]="masterType.name"
                   (ngModelChange)="onMasterTypeNameChange($event)"
                   required />
          </div>

          <!-- Arabic Name -->
          <div class="col-md-4">
            <label class="form-label">Arabic Name</label>
            <input type="text"
                   class="form-control"
                   name="nameAr"
                   [(ngModel)]="masterType.nameAr"
                   (ngModelChange)="arabicManuallyEdited = true"
                   dir="rtl" />
          </div>

          <!-- Phone -->
          <div class="col-md-4">
            <label class="form-label">Phone</label>
            <input type="text"
                   class="form-control"
                   name="phone"
                   [(ngModel)]="masterType.phone" />
          </div>

          <!-- Email -->
          <div class="col-md-4">
            <label class="form-label">Email</label>
            <input type="email"
                   class="form-control"
                   name="email"
                   [(ngModel)]="masterType.email" />
          </div>

          <!-- Address -->
          <div class="col-md-4">
            <label class="form-label">Address</label>
            <input type="text"
                   class="form-control"
                   name="address"
                   [(ngModel)]="masterType.address" />
          </div>

          <!-- VAT No -->
          <div class="col-md-4">
            <label class="form-label">VAT No</label>
            <input type="text"
                   class="form-control"
                   name="vatNo"
                   [(ngModel)]="masterType.vatNo" />
          </div>


          <!-- Submit Button -->
          <div class="col-md-12 d-flex justify-content-end mt-2 mb-2">
            <button type="submit"
                    class="btn btn-primary px-4"
                    [disabled]="!masterTypeForm.valid">
              <span *ngIf="!isEditMode">Save {{ typeLabel }}</span>
              <span *ngIf="isEditMode">Update {{ typeLabel }}</span>
            </button>
          </div>
        </form>

        <!-- ðŸ” Search -->
        <div class="form-section header-highlight">
          <div class="row g-3 align-items-center">

            <div class="col-md-6 d-flex">
              <label class="form-label me-2">Search</label>
              <input type="text"
                     class="form-control search-box"
                     placeholder="Master Code / Name / Email"
                     [(ngModel)]="searchText"
                     (input)="filterData()">
            </div>
            <!-- ðŸ§¾ Table -->

            <div *ngIf="filteredList.length === 0" class="text-center p-4">
              <h5 class="text-muted">No Data Found</h5>
            </div>

            <div class="table-responsive" *ngIf="filteredList.length > 0">
              <div class="table-scrol">

                <table class="table table-bordered table-rounded table-striped table-hover mb-3">

                  <thead class="table-header">
                    <tr>
                      <th>Master Code</th>
                      <th>Name</th>
                      <th>Address</th>
                      <th>Email</th>
                      <th>VAT No</th>
                      <th>Action</th>
                    </tr>
                  </thead>

                  <tbody>
                    <tr *ngFor="let m of filteredList"
                        (dblclick)="editMasterType(m)">

                      <td>{{ m.masterCode }}</td>
                      <td>{{ m.name }}</td>
                      <td>{{ m.address }}</td>
                      <td>{{ m.email }}</td>
                      <td>{{ m.vatNo }}</td>

                      <td>
                        <button class="btn btn-outline-primary btn-sm me-2"
                                (click)="editMasterType(m); $event.stopPropagation()">
                          Edit
                        </button>
                        <button class="btn btn-danger btn-sm"
                                (click)="deleteMasterType(m); $event.stopPropagation()">
                          Delete
                        </button>

                      </td>

                    </tr>
                  </tbody>

                </table>

              </div>
            </div>

          </div>
        </div>
      </div>
      </div>
    </div>
